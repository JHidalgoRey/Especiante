<section class="section-shell">
  <div class="page-width reveal">
    <div class="section-intro">
      <span class="eyebrow">Mi cuenta</span>
      <h1>{{ section.settings.heading }}</h1>
      <p class="text-muted">{{ section.settings.subheading }}</p>
    </div>

    <div class="grid grid--3">
      <article class="card">
        <h3>Datos de cliente</h3>
        <p class="text-muted">{{ customer.name }}</p>
        <p class="text-muted">{{ customer.email }}</p>
      </article>

      <article class="card" style="grid-column: span 2;">
        <h3>Pedidos</h3>
        {% if customer.orders.size > 0 %}
          <div class="table-wrapper">
            <table style="width: 100%; border-collapse: collapse;">
              <thead>
                <tr>
                  <th style="text-align:left; padding:0.4rem;">Pedido</th>
                  <th style="text-align:left; padding:0.4rem;">Fecha</th>
                  <th style="text-align:left; padding:0.4rem;">Estado</th>
                  <th style="text-align:left; padding:0.4rem;">Total</th>
                </tr>
              </thead>
              <tbody>
                {% for order in customer.orders %}
                  <tr>
                    <td style="padding:0.4rem;"><a href="{{ order.customer_url }}">{{ order.name }}</a></td>
                    <td style="padding:0.4rem;">{{ order.created_at | time_tag: format: 'date' }}</td>
                    <td style="padding:0.4rem;">{{ order.financial_status_label }}</td>
                    <td style="padding:0.4rem;">{{ order.total_price | money }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        {% else %}
          <p class="text-muted">Aún no tienes pedidos.</p>
        {% endif %}
      </article>
    </div>

    <p style="margin-top: 1.2rem;"><a href="{{ routes.account_logout_url }}" class="btn btn--secondary">Cerrar sesión</a></p>
  </div>
</section>

{% schema %}
{
  "name": "Cuenta cliente",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Título",
      "default": "Gestión de suscripción y pedidos"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subtítulo",
      "default": "Desde aquí puedes revisar estado de pedidos y administrar tu cuenta."
    }
  ]
}
{% endschema %}
