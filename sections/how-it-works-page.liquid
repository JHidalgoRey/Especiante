<section class="section-shell">
  <div class="page-width reveal">
    <div class="section-intro">
      <span class="eyebrow">{{ section.settings.eyebrow }}</span>
      <h1>{{ section.settings.heading }}</h1>
      <p class="text-muted">{{ section.settings.subheading }}</p>
    </div>

    <div class="grid grid--3">
      {% for block in section.blocks %}
        <article class="card step" {{ block.shopify_attributes }}>
          <span class="step__icon">{% render 'icon-line', icon: block.settings.icon %}</span>
          <h3>{{ block.settings.title }}</h3>
          <p class="text-muted">{{ block.settings.text }}</p>
        </article>
      {% endfor %}
    </div>

    <div class="card" style="margin-top: 1.6rem;">
      <h2>{{ section.settings.detail_title }}</h2>
      <p class="text-muted">{{ section.settings.detail_text }}</p>
      <div class="notes-row" style="margin-top: 1rem;">
        <span class="note-chip">{{ section.settings.note_shipping }}</span>
        <span class="note-chip">{{ section.settings.note_cancel }}</span>
        <span class="note-chip">{{ section.settings.note_allergens }}</span>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Página cómo funciona",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow",
      "default": "Guía"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Título",
      "default": "Cómo funciona la suscripción"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subtítulo",
      "default": "Proceso mensual simple para cocinar platos globales con seguridad y ritmo."
    },
    {
      "type": "text",
      "id": "detail_title",
      "label": "Título detalle",
      "default": "Operación mensual"
    },
    {
      "type": "textarea",
      "id": "detail_text",
      "label": "Texto detalle",
      "default": "Cerramos lote el último día de cada mes y despachamos entre día 1 y 5. Tu cuenta te permite pausar, cambiar plan y gestionar dirección."
    },
    {
      "type": "text",
      "id": "note_shipping",
      "label": "Nota envío",
      "default": "Despacho: días 1-5"
    },
    {
      "type": "text",
      "id": "note_cancel",
      "label": "Nota cancelación",
      "default": "Cancela o pausa cuando quieras"
    },
    {
      "type": "text",
      "id": "note_allergens",
      "label": "Nota alérgenos",
      "default": "Revisa alérgenos en cada sobre"
    }
  ],
  "blocks": [
    {
      "type": "step",
      "name": "Paso",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "Ícono",
          "default": "box",
          "options": [
            { "value": "box", "label": "Suscripción" },
            { "value": "globe", "label": "País" },
            { "value": "pan", "label": "Cocina" }
          ]
        },
        {
          "type": "text",
          "id": "title",
          "label": "Título",
          "default": "Selecciona tu plan"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Texto",
          "default": "Mensual, trimestral o anual, según tu ritmo de cocina."
        }
      ]
    }
  ],
  "max_blocks": 3,
  "presets": [
    {
      "name": "Página cómo funciona",
      "blocks": [
        { "type": "step", "settings": { "icon": "box", "title": "1. Suscríbete", "text": "Elige plan y confirma pago seguro." } },
        { "type": "step", "settings": { "icon": "globe", "title": "2. Recibe un país", "text": "Cada mes llega una caja temática con 3 blends." } },
        { "type": "step", "settings": { "icon": "pan", "title": "3. Cocina", "text": "Sigue receta + QR y termina en 20-30 min." } }
      ]
    }
  ]
}
{% endschema %}
